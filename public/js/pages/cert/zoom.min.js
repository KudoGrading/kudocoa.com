import{createLogger}from"../../../shared/lib/log.js";function trackMouseZoom(n,{scale:i=1.5}={}){var t=createLogger({prefix:"trackMouseZoom()",debugMode:location.search.includes("debug")});if(!n.parentElement)return t.error("img.parentElement not found!");if(!n.parentElement.classList.contains("zoom-container")){t.debug("Creating zoom container...");let e=document.createElement("div");e.className="zoom-container",n.style.cssText=`
            border: none ; padding: 0 ; box-shadow: none ; max-width: 100% ; max-height: 600px ; width: auto ;
            height: auto ; display: block ; object-fit: contain
        `,e.style.cssText=`
            overflow: hidden ; position: relative ; display: inline-block ; line-height: 0 ;
            border: 3px solid #fff ; padding: 10px ; box-shadow: 0 0 20px rgba(255,255,255,0.1)
        `,n.parentNode.insertBefore(e,n),e.append(n)}t.debug("Adding mouse listeners...");let r=n.parentElement;r.onmousemove=e=>{e.preventDefault();var t=r.getBoundingClientRect(),o=(e.clientX-t.left)/t.width*100;Object.assign(n.style,{transform:`scale(${i})`,transformOrigin:o+`% ${(e.clientY-t.top)/t.height*100}%`,transition:"transform 0.05s ease-out"})},r.onmouseleave=()=>Object.assign(n.style,{transform:"scale(1)",transition:"transform 0.2s cubic-bezier(0.2, 0.9, 0.3, 1.1)"}),t.debug("Successfully completed!")}function zoomImg({imgURL:e,title:t="",fadeOutDuration:o=.12}){var n=createLogger({prefix:"zoomImg()",debugMode:location.search.includes("debug")});n.debug("Initializing zoom overlay...");let i=document.createElement("div"),r=(Object.assign(i.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,transition:`background-color ${o}s ease-out`}),n.debug("Initializing zoomed image..."),new Image);r.src=e,Object.assign(r.style,{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",opacity:0,transform:"scale(0.95) translateY(10px)",transition:"opacity 0.65s cubic-bezier(.165,.84,.44,1), transform 0.55s cubic-bezier(.165,.84,.44,1)"}),t&&(r.title=t),n.debug("Adding click listeners..."),i.onclick=r.onclick=()=>{document.body.style.overflow="",document.body.style.animation="revert-layer",document.removeEventListener("wheel",preventScroll),document.removeEventListener("touchmove",preventScroll),i.style.backgroundColor="rgba(0,0,0,0)",Object.assign(r.style,{opacity:0,transform:"scale(1.05)",transition:`opacity ${o}s ease-out, transform ${o}s ease-out`}),setTimeout(()=>i.remove(),1e3*o)},n.debug("Preventing scroll..."),document.body.style.overflow="hidden",document.body.style.animation="disabled",document.addEventListener("wheel",preventScroll,{passive:!1}),document.addEventListener("touchmove",preventScroll,{passive:!1}),n.debug("Showing modal..."),i.append(r),document.body.append(i),setTimeout(()=>{i.style.backgroundColor="rgba(0,0,0,0.9)",r.style.opacity="1",r.style.transform="scale(1) translateY(0)"},10)}function preventScroll(e){e.preventDefault()}export{trackMouseZoom,zoomImg};