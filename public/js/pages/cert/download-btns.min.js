import{createLogger}from"../../../shared/lib/log.js";function initDownloadBtns(){let d=createLogger({prefix:"initDownloadBtns()",debugMode:location.search.includes("debug")}),e=(d.debug("Initializing download buttons..."),[]);document.querySelectorAll(".download-btn").forEach(i=>{i.onclick=async t=>{t.preventDefault();var t=i.dataset.url,e=i.dataset.filename,n=i.textContent.trim();d.debug(n+" button clicked");try{var o=URL.createObjectURL(await(await fetch(t)).blob()),a=Object.assign(document.createElement("a"),{href:o,download:e,style:"display: none"});document.body.append(a),a.click(),a.remove(),URL.revokeObjectURL(o),d.debug(n+" download initiated!")}catch(e){d.debug(`Failed to initiate ${n} download!`),open(t,"_blank")}},e.push(i)});var t=e.map(e=>e.textContent.trim());d.debug(`${e.length||"No"} button${1==e.length?"":"s"} initialized! (${t.join(" + ")})`)}export{initDownloadBtns};